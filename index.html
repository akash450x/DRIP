<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>DRIP</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
:root{ --primary:#FF9933; --bg:#000; --card:#0b0b0b; --border:#1b1b1b; }
*{margin:0;padding:0;box-sizing:border-box}
body{ background:#000; color:#fff; font-family:-apple-system,BlinkMacSystemFont,sans-serif; height:100vh; overflow:hidden; }

/* SPLASH */
#splash{ position:fixed; inset:0; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10000; }
.flag-wrap{width:180px;height:110px;background:linear-gradient(to bottom, #FF9933 33.3%, #fff 33.3%, #fff 66.6%, #128807 66.6%);position:relative;border-radius:4px;}
.chakra{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:30px;height:30px;background:url("https://upload.wikimedia.org/wikipedia/commons/1/17/Ashoka_Chakra.svg") center/contain no-repeat}
.jay-hind{margin-top:15px;font-family:'Bebas Neue';letter-spacing:5px;color:#D4AF37}

/* AUTH */
#auth-page{ display:none; height:100vh; flex-direction:column; align-items:center; justify-content:center; }
.auth-btn{ padding:15px 30px; background:#fff; color:#000; border:none; border-radius:50px; font-weight:bold; margin-top:20px; width:80%; max-width:300px; }

/* APP CORE */
#app{display:none;height:100vh;flex-direction:column}
.header{height:60px; display:flex; align-items:center; padding:0 16px; border-bottom:1px solid var(--border);}
.brand{font-family:'Bebas Neue'; font-size:28px; color:var(--primary);}

.view{flex:1;position:relative;overflow:hidden}
.page{display:none;height:100%;overflow-y:auto}
.page.active{display:block}

/* REELS BUTTONS */
#reels { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; }
#reels::-webkit-scrollbar { display: none; }
.reel{ height: 100%; width: 100%; position:relative; scroll-snap-align: start; background: #000; overflow: hidden; }
.reel video, .reel img { width:100%; height:100%; object-fit:cover; }

.heart-pop { position: absolute; font-size: 80px; color: #ff4d4d; pointer-events: none; animation: heartAnim 0.8s ease-out forwards; z-index: 50; }
@keyframes heartAnim { 0% { transform: scale(0) translate(-50%,-50%); opacity:0; } 20% { transform: scale(1.2) translate(-50%,-50%); opacity:1; } 100% { transform: scale(1.5) translate(-50%,-150%); opacity:0; } }

.reel-desc{ position:absolute; bottom:25px; left:16px; max-width:65%; font-size:13px; background:rgba(0,0,0,0.5); padding:8px 12px; border-radius:10px; backdrop-filter:blur(8px); z-index:10; }
.reel-actions{ position:absolute; right:12px; bottom:40px; display:flex; flex-direction:column; gap:16px; align-items:center; z-index:20; }
.reel-actions button{ background:rgba(255,255,255,0.08); border:none; color:#fff; padding:12px; border-radius:50%; font-size:18px; }
.auto-btn-reel { font-size:9px!important; font-weight:bold; padding:10px 8px!important; background:rgba(255,255,255,0.05)!important; border:1px solid rgba(255,255,255,0.1)!important; color:#888!important; text-transform:uppercase; }
.auto-btn-reel.active { color:var(--primary)!important; border-color:var(--primary)!important; }

/* GENDER & TABS */
.search-tabs{display:flex; gap:6px; margin-top:12px;}
.search-tabs button{ flex:1; padding:10px 0; font-size:11px; font-weight:bold; background:#111; border:1px solid var(--border); color:#666; border-radius:10px; }
.search-tabs button.active{ border-color:var(--primary); color:var(--primary); }

.gender{display:flex; justify-content:center; gap:8px; margin:15px 0;}
.gender button{ flex:1; padding:10px 0; font-size:11px; background:#0a0a0a; border:1px solid #222; color:#555; border-radius:10px; font-weight:700; }
.gender button.active{ border-color:var(--primary); color:var(--primary); background:rgba(255,153,51,0.05); }

/* NAV */
.nav{ height:75px; display:flex; border-top:1px solid var(--border); background:#000; padding-bottom:env(safe-area-inset-bottom); }
.tab{ flex:1; background:none; border:none; color:#333; font-size:24px; }
.tab.active{color:var(--primary)}
</style>
</head>

<body>

<div id="splash">
  <div class="flag-wrap"><div class="chakra"></div></div>
  <div class="jay-hind">JAY HIND</div>
</div>

<div id="auth-page">
    <h1 style="font-family:'Bebas Neue'; font-size:60px; color:var(--primary);">DRIP</h1>
    <button class="auth-btn" onclick="googleLogin()">Sign In with Google</button>
</div>

<div id="app">
    <header class="header"><div class="brand">DRIP</div></header>
    <div class="view">
        <div id="home" class="page active" style="padding:40px; text-align:center;">
            <p style="color:#666; line-height:1.8;">
                DRIP is India‚Äôs next-generation short-video platform built for creators who move fast and think bold.<br>
                Create reels, share moments, and build a digital identity that actually matters.<br>
                Designed for Gen-Z creators who want speed, simplicity, and real reach.<br>
                No noise. No clutter. Just content that hits different.<br>
                <span style="color:var(--primary); font-weight:900; display:block; margin-top:15px;">BUILT IN INDIA ‚Ä¢ EST 2026 ‚Ä¢ DRIP DIFFERENT</span>
            </p>
        </div>

        <div id="reels" class="page"></div>

        <div id="create" class="page" style="padding:20px;">
            <div id="preview-box" style="width:100%; height:180px; background:#111; border-radius:12px; margin-bottom:12px; display:none; overflow:hidden; border:1px solid #222;"></div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:15px;">
                <button onclick="pick('video/*')" style="padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">VIDEO</button>
                <button onclick="pick('image/*')" style="padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">IMAGE</button>
            </div>
            <textarea id="desc" rows="3" placeholder="Description..." style="width:100%; background:#111; border:1px solid #222; padding:12px; color:#fff; border-radius:12px;"></textarea>
            <button onclick="publish()" style="margin-top:14px; width:100%; padding:15px; background:var(--primary); border:none; border-radius:12px; font-weight:bold; color:#000;">PUBLISH</button>
            <input type="file" id="file" hidden onchange="handlePreview(this)">
        </div>

        <div id="search" class="page" style="padding:20px;">
            <input placeholder="Search..." style="width:100%; background:#111; padding:14px; color:#fff; border:none; border-radius:12px;">
            <div class="search-tabs"><button class="s-tab" onclick="setTab(this)">TOP</button><button class="s-tab" onclick="setTab(this)">LATEST</button><button class="s-tab" onclick="setTab(this)">USERS</button></div>
        </div>

        <div id="profile" class="page" style="text-align:center; padding:20px;">
            <div id="userAvatar" style="width:90px; height:90px; border-radius:30px; background:#111 center/cover; margin:auto; border:1px solid #222;"></div>
            <button onclick="document.getElementById('avatarFile').click()" style="width:100%; margin-top:10px; padding:12px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">Edit Profile Picture</button>
            <input type="file" id="avatarFile" hidden accept="image/*" onchange="updateAvatar(this)">
            
            <h2 id="userName" style="margin-top:15px;" contenteditable="true">AKASH</h2>
            <p id="userHandle" style="color:#444" contenteditable="true">@akash</p>
            
            <div class="gender"><button class="g-sel" onclick="setG(this)">Male</button><button class="g-sel" onclick="setG(this)">Female</button><button class="g-sel" onclick="setG(this)">Other</button></div>
            
            <input type="date" id="dob" style="width:100%; background:#111; padding:12px; color:#fff; border:1px solid #222; border-radius:12px; margin-bottom:10px;">

            <button onclick="logoutEmpire()" style="width:100%; padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">LOG OUT</button>
            <button onclick="deleteEmpire()" style="width:100%; margin-top:10px; padding:15px; background:#111; border:1px solid #331111; color:#ff4d4d; border-radius:12px;">DELETE ACCOUNT</button>
        </div>
    </div>
    <nav class="nav">
        <button class="tab active" onclick="go('home',this)">üè†</button>
        <button class="tab" onclick="go('reels',this)">‚ñ∂</button>
        <button class="tab" onclick="go('create',this)">Ôºã</button>
        <button class="tab" onclick="go('search',this)">üîç</button>
        <button class="tab" onclick="go('profile',this)">üë§</button>
    </nav>
</div>

<script>
const config = {
    apiKey: "AIzaSyA8SMoQI3UxfhZwdq65H81Jv31Q8wUKxMM",
    authDomain: "drip-india.firebaseapp.com",
    projectId: "drip-india",
    storageBucket: "drip-india.firebasestorage.app",
    messagingSenderId: "40598053043",
    appId: "1:40598053043:web:b800c05afba716974690c6"
};
firebase.initializeApp(config);
const auth = firebase.auth();

auth.onAuthStateChanged(user => {
    document.getElementById('splash').style.display = 'none';
    if (user) {
        document.getElementById('auth-page').style.display = 'none';
        document.getElementById('app').style.display = 'flex';
        document.getElementById('userName').innerText = user.displayName || "AKASH";
        if(user.photoURL) document.getElementById('userAvatar').style.backgroundImage = `url(${user.photoURL})`;
    } else {
        document.getElementById('app').style.display = 'none';
        document.getElementById('auth-page').style.display = 'flex';
    }
});

// üî± FIXED ACCOUNT CHOOSER
function googleLogin() {
    const provider = new firebase.auth.GoogleAuthProvider();
    provider.setCustomParameters({ prompt: 'select_account' });
    auth.signInWithPopup(provider).catch(() => auth.signInWithRedirect(provider));
}

function logoutEmpire() { if(confirm("Log out?")) auth.signOut().then(() => location.reload()); }
function deleteEmpire() { if(confirm("Permanently Delete?")) auth.signOut().then(() => location.reload()); }

// UI LOGIC
function go(id,btn){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    btn.classList.add('active');
}
function setG(btn) { document.querySelectorAll('.g-sel').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
function setTab(btn) { document.querySelectorAll('.s-tab').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
function pick(type){ const f = document.getElementById('file'); f.accept = type; f.click(); }
function handlePreview(input) {
    const box = document.getElementById('preview-box');
    box.innerHTML = "";
    if (input.files[0]) {
        box.style.display = "block";
        const url = URL.createObjectURL(input.files[0]);
        if (input.files[0].type.includes('video')) box.innerHTML = `<video src="${url}" autoplay muted loop></video>`;
        else box.innerHTML = `<img src="${url}">`;
    }
}
function updateAvatar(input){ if(input.files[0]) document.getElementById('userAvatar').style.backgroundImage = `url(${URL.createObjectURL(input.files[0])})`; }

let auto=false, autoInt;
function toggleAuto(btn){
    auto = !auto; btn.classList.toggle('active');
    if(auto) autoInt = setInterval(() => document.getElementById('reels').scrollBy({top: window.innerHeight, behavior: 'smooth'}), 4000);
    else clearInterval(autoInt);
}

function publish(){
    const file = document.getElementById('file');
    if(!file.files[0]) return alert("Select media!");
    const url = URL.createObjectURL(file.files[0]);
    const isVid = file.files[0].type.includes('video');
    const reel = document.createElement("div");
    reel.className = "reel";
    reel.onclick = (e) => {
        const now = Date.now();
        if (now - (reel.dataset.lt || 0) < 300) {
            reel.querySelector('.like').style.color = '#FF9933';
            const h = document.createElement('div'); h.className='heart-pop'; h.innerHTML='‚ù§Ô∏è';
            h.style.left = (e.clientX || e.touches[0].clientX)+'px'; h.style.top = (e.clientY-reel.getBoundingClientRect().top)+'px';
            reel.appendChild(h); setTimeout(()=>h.remove(), 800);
        }
        reel.dataset.lt = now;
    };
    // üî± RESTORED ALL REEL BUTTONS
    reel.innerHTML = `
        ${isVid ? `<video src="${url}" autoplay muted loop playsinline></video>` : `<img src="${url}">`}
        <div class="reel-desc">${document.getElementById('desc').value || "New Drip"}</div>
        <div class="reel-actions">
            <button class="like" onclick="event.stopPropagation(); this.style.color='#FF9933'">‚ù§Ô∏è</button>
            <button onclick="event.stopPropagation(); alert('Comments locked')">üí¨</button>
            <button onclick="event.stopPropagation(); alert('Sharing...')">‚ÜóÔ∏è</button>
            <button onclick="event.stopPropagation(); alert('Downloading...')">‚¨áÔ∏è</button>
            <button onclick="event.stopPropagation(); this.innerText='‚úÖ'">üë§</button>
            <button class="auto-btn-reel" onclick="event.stopPropagation(); toggleAuto(this)">AUTO</button>
        </div>`;
    document.getElementById('reels').appendChild(reel);
    document.getElementById('desc').value = ""; file.value = "";
    document.getElementById('preview-box').style.display = "none";
    go('reels', document.querySelectorAll('.tab')[1]);
}
</script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>DRIP</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
:root{ --primary:#FF9933; --bg:#000; --card:#0b0b0b; --border:#1b1b1b; }
*{margin:0;padding:0;box-sizing:border-box}
body{ background:#000; color:#fff; font-family:-apple-system,BlinkMacSystemFont,sans-serif; height:100vh; overflow:hidden; }

/* SPLASH */
#splash{ position:fixed; inset:0; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10000; }
.flag-wrap{width:180px;height:110px;background:linear-gradient(to bottom, #FF9933 33.3%, #fff 33.3%, #fff 66.6%, #128807 66.6%);position:relative;border-radius:4px;}
.chakra{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:30px;height:30px;background:url("https://upload.wikimedia.org/wikipedia/commons/1/17/Ashoka_Chakra.svg") center/contain no-repeat}
.jay-hind{margin-top:15px;font-family:'Bebas Neue';letter-spacing:5px;color:#D4AF37}

/* AUTH */
#auth-page{ display:none; height:100vh; flex-direction:column; align-items:center; justify-content:center; }
.auth-btn{ padding:15px 30px; background:#fff; color:#000; border:none; border-radius:50px; font-weight:bold; margin-top:20px; width:80%; max-width:300px; }

/* APP CORE */
#app{display:none;height:100vh;flex-direction:column}
.header{height:60px; display:flex; align-items:center; padding:0 16px; border-bottom:1px solid var(--border);}
.brand{font-family:'Bebas Neue'; font-size:28px; color:var(--primary);}

.view{flex:1;position:relative;overflow:hidden}
.page{display:none;height:100%;overflow-y:auto}
.page.active{display:block}

/* REELS BUTTONS */
#reels { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; }
#reels::-webkit-scrollbar { display: none; }
.reel{ height: 100%; width: 100%; position:relative; scroll-snap-align: start; background: #000; overflow: hidden; }
.reel video, .reel img { width:100%; height:100%; object-fit:cover; }

.heart-pop { position: absolute; font-size: 80px; color: #ff4d4d; pointer-events: none; animation: heartAnim 0.8s ease-out forwards; z-index: 50; }
@keyframes heartAnim { 0% { transform: scale(0) translate(-50%,-50%); opacity:0; } 20% { transform: scale(1.2) translate(-50%,-50%); opacity:1; } 100% { transform: scale(1.5) translate(-50%,-150%); opacity:0; } }

.reel-desc{ position:absolute; bottom:25px; left:16px; max-width:65%; font-size:13px; background:rgba(0,0,0,0.5); padding:8px 12px; border-radius:10px; backdrop-filter:blur(8px); z-index:10; }
.reel-actions{ position:absolute; right:12px; bottom:40px; display:flex; flex-direction:column; gap:16px; align-items:center; z-index:20; }
.reel-actions button{ background:rgba(255,255,255,0.08); border:none; color:#fff; padding:12px; border-radius:50%; font-size:18px; }
.auto-btn-reel { font-size:9px!important; font-weight:bold; padding:10px 8px!important; background:rgba(255,255,255,0.05)!important; border:1px solid rgba(255,255,255,0.1)!important; color:#888!important; text-transform:uppercase; }
.auto-btn-reel.active { color:var(--primary)!important; border-color:var(--primary)!important; }

/* GENDER & TABS */
.search-tabs{display:flex; gap:6px; margin-top:12px;}
.search-tabs button{ flex:1; padding:10px 0; font-size:11px; font-weight:bold; background:#111; border:1px solid var(--border); color:#666; border-radius:10px; }
.search-tabs button.active{ border-color:var(--primary); color:var(--primary); }

.gender{display:flex; justify-content:center; gap:8px; margin:15px 0;}
.gender button{ flex:1; padding:10px 0; font-size:11px; background:#0a0a0a; border:1px solid #222; color:#555; border-radius:10px; font-weight:700; }
.gender button.active{ border-color:var(--primary); color:var(--primary); background:rgba(255,153,51,0.05); }

/* NAV */
.nav{ height:75px; display:flex; border-top:1px solid var(--border); background:#000; padding-bottom:env(safe-area-inset-bottom); }
.tab{ flex:1; background:none; border:none; color:#333; font-size:24px; }
.tab.active{color:var(--primary)}
</style>
</head>

<body>

<div id="splash">
  <div class="flag-wrap"><div class="chakra"></div></div>
  <div class="jay-hind">JAY HIND</div>
</div>

<div id="auth-page">
    <h1 style="font-family:'Bebas Neue'; font-size:60px; color:var(--primary);">DRIP</h1>
    <button class="auth-btn" onclick="googleLogin()">Sign In with Google</button>
</div>

<div id="app">
    <header class="header"><div class="brand">DRIP</div></header>
    <div class="view">
        <div id="home" class="page active" style="padding:40px; text-align:center;">
            <p style="color:#666; line-height:1.8;">
                DRIP is India‚Äôs next-generation short-video platform built for creators who move fast and think bold.<br>
                Create reels, share moments, and build a digital identity that actually matters.<br>
                Designed for Gen-Z creators who want speed, simplicity, and real reach.<br>
                No noise. No clutter. Just content that hits different.<br>
                <span style="color:var(--primary); font-weight:900; display:block; margin-top:15px;">BUILT IN INDIA ‚Ä¢ EST 2026 ‚Ä¢ DRIP DIFFERENT</span>
            </p>
        </div>

        <div id="reels" class="page"></div>

        <div id="create" class="page" style="padding:20px;">
            <div id="preview-box" style="width:100%; height:180px; background:#111; border-radius:12px; margin-bottom:12px; display:none; overflow:hidden; border:1px solid #222;"></div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:15px;">
                <button onclick="pick('video/*')" style="padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">VIDEO</button>
                <button onclick="pick('image/*')" style="padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">IMAGE</button>
            </div>
            <textarea id="desc" rows="3" placeholder="Description..." style="width:100%; background:#111; border:1px solid #222; padding:12px; color:#fff; border-radius:12px;"></textarea>
            <button onclick="publish()" style="margin-top:14px; width:100%; padding:15px; background:var(--primary); border:none; border-radius:12px; font-weight:bold; color:#000;">PUBLISH</button>
            <input type="file" id="file" hidden onchange="handlePreview(this)">
        </div>

        <div id="search" class="page" style="padding:20px;">
            <input placeholder="Search..." style="width:100%; background:#111; padding:14px; color:#fff; border:none; border-radius:12px;">
            <div class="search-tabs"><button class="s-tab" onclick="setTab(this)">TOP</button><button class="s-tab" onclick="setTab(this)">LATEST</button><button class="s-tab" onclick="setTab(this)">USERS</button></div>
        </div>

        <div id="profile" class="page" style="text-align:center; padding:20px;">
            <div id="userAvatar" style="width:90px; height:90px; border-radius:30px; background:#111 center/cover; margin:auto; border:1px solid #222;"></div>
            <button onclick="document.getElementById('avatarFile').click()" style="width:100%; margin-top:10px; padding:12px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">Edit Profile Picture</button>
            <input type="file" id="avatarFile" hidden accept="image/*" onchange="updateAvatar(this)">
            
            <h2 id="userName" style="margin-top:15px;" contenteditable="true">AKASH</h2>
            <p id="userHandle" style="color:#444" contenteditable="true">@akash</p>
            
            <div class="gender"><button class="g-sel" onclick="setG(this)">Male</button><button class="g-sel" onclick="setG(this)">Female</button><button class="g-sel" onclick="setG(this)">Other</button></div>
            
            <input type="date" id="dob" style="width:100%; background:#111; padding:12px; color:#fff; border:1px solid #222; border-radius:12px; margin-bottom:10px;">

            <button onclick="logoutEmpire()" style="width:100%; padding:15px; background:#111; border:1px solid #222; color:#fff; border-radius:12px;">LOG OUT</button>
            <button onclick="deleteEmpire()" style="width:100%; margin-top:10px; padding:15px; background:#111; border:1px solid #331111; color:#ff4d4d; border-radius:12px;">DELETE ACCOUNT</button>
        </div>
    </div>
    <nav class="nav">
        <button class="tab active" onclick="go('home',this)">üè†</button>
        <button class="tab" onclick="go('reels',this)">‚ñ∂</button>
        <button class="tab" onclick="go('create',this)">Ôºã</button>
        <button class="tab" onclick="go('search',this)">üîç</button>
        <button class="tab" onclick="go('profile',this)">üë§</button>
    </nav>
</div>

<script>
const config = {
    apiKey: "AIzaSyA8SMoQI3UxfhZwdq65H81Jv31Q8wUKxMM",
    authDomain: "drip-india.firebaseapp.com",
    projectId: "drip-india",
    storageBucket: "drip-india.firebasestorage.app",
    messagingSenderId: "40598053043",
    appId: "1:40598053043:web:b800c05afba716974690c6"
};
firebase.initializeApp(config);
const auth = firebase.auth();

auth.onAuthStateChanged(user => {
    document.getElementById('splash').style.display = 'none';
    if (user) {
        document.getElementById('auth-page').style.display = 'none';
        document.getElementById('app').style.display = 'flex';
        document.getElementById('userName').innerText = user.displayName || "AKASH";
        if(user.photoURL) document.getElementById('userAvatar').style.backgroundImage = `url(${user.photoURL})`;
    } else {
        document.getElementById('app').style.display = 'none';
        document.getElementById('auth-page').style.display = 'flex';
    }
});

// üî± FIXED ACCOUNT CHOOSER
function googleLogin() {
    const provider = new firebase.auth.GoogleAuthProvider();
    provider.setCustomParameters({ prompt: 'select_account' });
    auth.signInWithPopup(provider).catch(() => auth.signInWithRedirect(provider));
}

function logoutEmpire() { if(confirm("Log out?")) auth.signOut().then(() => location.reload()); }
function deleteEmpire() { if(confirm("Permanently Delete?")) auth.signOut().then(() => location.reload()); }

// UI LOGIC
function go(id,btn){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    btn.classList.add('active');
}
function setG(btn) { document.querySelectorAll('.g-sel').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
function setTab(btn) { document.querySelectorAll('.s-tab').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
function pick(type){ const f = document.getElementById('file'); f.accept = type; f.click(); }
function handlePreview(input) {
    const box = document.getElementById('preview-box');
    box.innerHTML = "";
    if (input.files[0]) {
        box.style.display = "block";
        const url = URL.createObjectURL(input.files[0]);
        if (input.files[0].type.includes('video')) box.innerHTML = `<video src="${url}" autoplay muted loop></video>`;
        else box.innerHTML = `<img src="${url}">`;
    }
}
function updateAvatar(input){ if(input.files[0]) document.getElementById('userAvatar').style.backgroundImage = `url(${URL.createObjectURL(input.files[0])})`; }

let auto=false, autoInt;
function toggleAuto(btn){
    auto = !auto; btn.classList.toggle('active');
    if(auto) autoInt = setInterval(() => document.getElementById('reels').scrollBy({top: window.innerHeight, behavior: 'smooth'}), 4000);
    else clearInterval(autoInt);
}

function publish(){
    const file = document.getElementById('file');
    if(!file.files[0]) return alert("Select media!");
    const url = URL.createObjectURL(file.files[0]);
    const isVid = file.files[0].type.includes('video');
    const reel = document.createElement("div");
    reel.className = "reel";
    reel.onclick = (e) => {
        const now = Date.now();
        if (now - (reel.dataset.lt || 0) < 300) {
            reel.querySelector('.like').style.color = '#FF9933';
            const h = document.createElement('div'); h.className='heart-pop'; h.innerHTML='‚ù§Ô∏è';
            h.style.left = (e.clientX || e.touches[0].clientX)+'px'; h.style.top = (e.clientY-reel.getBoundingClientRect().top)+'px';
            reel.appendChild(h); setTimeout(()=>h.remove(), 800);
        }
        reel.dataset.lt = now;
    };
    // üî± RESTORED ALL REEL BUTTONS
    reel.innerHTML = `
        ${isVid ? `<video src="${url}" autoplay muted loop playsinline></video>` : `<img src="${url}">`}
        <div class="reel-desc">${document.getElementById('desc').value || "New Drip"}</div>
        <div class="reel-actions">
            <button class="like" onclick="event.stopPropagation(); this.style.color='#FF9933'">‚ù§Ô∏è</button>
            <button onclick="event.stopPropagation(); alert('Comments locked')">üí¨</button>
            <button onclick="event.stopPropagation(); alert('Sharing...')">‚ÜóÔ∏è</button>
            <button onclick="event.stopPropagation(); alert('Downloading...')">‚¨áÔ∏è</button>
            <button onclick="event.stopPropagation(); this.innerText='‚úÖ'">üë§</button>
            <button class="auto-btn-reel" onclick="event.stopPropagation(); toggleAuto(this)">AUTO</button>
        </div>`;
    document.getElementById('reels').appendChild(reel);
    document.getElementById('desc').value = ""; file.value = "";
    document.getElementById('preview-box').style.display = "none";
    go('reels', document.querySelectorAll('.tab')[1]);
}
</script>
</body>
</html>
